(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"8SME":function(t,e,a){},"H/R3":function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),n=a.n(i),o=(a("Zy7l"),a("RQ3N"),a("EB6q")),r=a.n(o),s=(a("p8y5"),a("3zPb")),l=a.n(s),c=(a("VGZy"),a("7N9w")),g=a.n(c),u=(a("OKBm"),a("rUEw")),d=a.n(u),m=(a("y7W8"),a("i7wE")),f=a.n(m),p=(a("EMu8"),a("8606")),b=a.n(p),v=(a("GVEf"),a("7t/g")),h=a.n(v),_=(a("7Kd7"),a("N4fY")),k=a.n(_),y=(a("Ql/2"),a("QQVE")),T={name:"TagList",data:function(){return{dialogFormVisible:!1,form:{tagName:"",description:""},rules:{tagName:[{required:!0,message:"请输入标签名称",trigger:"blur"}],description:[{required:!0,message:"请输入标签描述",trigger:"blur"}]},currentPage:1,totalTags:10,tagList:[]}},components:{"el-form":a.n(y).a,"el-form-item":k.a,"el-button":h.a,"el-input":b.a,"el-tag":f.a,"el-table":d.a,"el-table-column":g.a,"el-dialog":l.a,"el-pagination":r.a},created:function(){this.getTagListByPage(this.currentPage)},methods:{addTag:function(){var t=this;this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.tagForm.resetFields(),t.$refs.tagName.focus()})},submitForm:function(){var e=this;e.$refs.tagForm.validate(function(t){if(!t)return e.$message.error("信息填写不完整哟~"),!1;e.$axios._post("tag",n()({},e.form)).then(function(t){t.data.code?(e.$message.error(t.data.message),console.log(t.data.err)):(e.$message.success("保存标签成功！"),e.$refs.tagForm.resetFields(),e.dialogFormVisible=!1,e.getTagListByPage(e.currentPage))}).catch(function(t){console.log(t)})})},getTagListByPage:function(t){var e=this;e.$axios._get("tag",{page:t}).then(function(t){t.data.code?e.$message.error(t.data.message):(e.tagList=t.data.data.res_limit,e.totalTags=t.data.data.total)}).catch(function(t){console.log(t)})},deleteTag:function(t){var e=this;e.$axios._delete("tag/tag",{tagId:t}).then(function(t){t.data.code?e.getTagListByPage(e.currentPage):e.$message.error(t.data.message)}).catch(function(t){console.log(t)})},updateTag:function(t,e,a){this.form={tagName:t,description:e},console.log("update"),this.dialogFormVisible=!0},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.getTagListByPage(t)},prevClick:function(){this.currentPage=this.currentPage--},nextClick:function(){this.currentPage=this.currentPage++},filterTag:function(t,e){return e.tag===t}}},P=(a("Po71"),a("KHd+")),F=Object(P.a)(T,function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"list-box"},[i("div",{staticClass:"top-section"},[i("el-button",{on:{click:a.addTag}},[a._v("新增标签")])],1),a._v(" "),a.tagList?i("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:a.tagList}},[i("el-table-column",{attrs:{prop:"tagName",label:"标签名"}}),a._v(" "),i("el-table-column",{attrs:{prop:"description",label:"描述"}}),a._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){t.preventDefault(),a.updateTag(e.row.tagName,e.row.description,e.row._id)}}},[a._v("\n          修改\n        ")]),a._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(t){t.preventDefault(),a.deleteTag(e.row._id)}}},[a._v("\n          移除\n        ")])]}}])})],1):a._e(),a._v(" "),i("div",{staticClass:"table-pagination"},[i("el-pagination",{attrs:{"current-page":a.currentPage,"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:a.totalTags},on:{"prev-click":a.prevClick,"next-click":a.nextClick,"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1),a._v(" "),i("el-dialog",{attrs:{title:"新增标签",visible:a.dialogFormVisible},on:{"update:visible":function(t){a.dialogFormVisible=t}}},[i("el-form",{ref:"tagForm",attrs:{rules:a.rules,model:a.form,"label-position":"left","label-width":"80px"},nativeOn:{keyup:function(t){return"button"in t||!a._k(t.keyCode,"enter",13,t.key,"Enter")?a.submitForm(t):null}}},[i("el-form-item",{attrs:{label:"标签名称",prop:"tagName"}},[i("el-input",{ref:"tagName",model:{value:a.form.tagName,callback:function(t){a.$set(a.form,"tagName",t)},expression:"form.tagName"}})],1),a._v(" "),i("el-form-item",{attrs:{label:"标签描述",prop:"description"}},[i("el-input",{model:{value:a.form.description,callback:function(t){a.$set(a.form,"description",t)},expression:"form.description"}})],1)],1),a._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){a.dialogFormVisible=!1}}},[a._v("取 消")]),a._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:a.submitForm}},[a._v("确 定")])],1)],1)],1)},[],!1,null,"93b94b64",null);F.options.__file="TagList.vue",e.default=F.exports},Po71:function(t,e,a){"use strict";var i=a("8SME");a.n(i).a}}]);