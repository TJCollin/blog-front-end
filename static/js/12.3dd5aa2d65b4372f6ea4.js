(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Yl6W:function(e,t,o){"use strict";o.r(t),o("Zy7l"),o("RQ3N");var r=o("EB6q"),n=o.n(r),a=(o("p8y5"),o("3zPb")),c=o.n(a),l=(o("VGZy"),o("7N9w")),i=o.n(l),s=(o("OKBm"),o("rUEw")),u=o.n(s),f=(o("y7W8"),o("i7wE")),p=o.n(f),m=(o("EMu8"),o("8606")),d=o.n(m),g=(o("GVEf"),o("7t/g")),j=o.n(g),b=(o("7Kd7"),o("N4fY")),v=o.n(b),h=(o("Ql/2"),o("QQVE")),_={name:"ProjectList",data:function(){return{dialogFormVisible:!1,form:{projectName:"",projectUrl:"",projectCode:"",projectIcon:"",projectDesc:""},rules:{projectName:{required:!0,message:"项目名称不能为空哟！",trigger:"blur"},projectCode:{required:!0,message:"源码地址不能为空哟！",trigger:"blur"}},currentPage:1,totalProjects:1,projectList:[]}},components:{"el-form":o.n(h).a,"el-form-item":v.a,"el-button":j.a,"el-input":d.a,"el-tag":p.a,"el-table":u.a,"el-table-column":i.a,"el-dialog":c.a,"el-pagination":n.a},created:function(){this.getProjectListByPage(1)},methods:{addProject:function(){var e=this;this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.projectForm.resetFields(),e.$refs.projectName.focus()})},submitForm:function(){var t=this;t.$refs.projectForm.validate(function(e){if(!e)return t.message.error("必要信息未填写完整哟~"),!1;t.$refs.projectForm.validate(function(e){if(!e)return t.$message.error("必要信息未填写完整！"),!1;t.$axios._post("project",t.form).then(function(e){e.data.code?(t.$message.error(e.data.message),console.log(e.data.err)):(t.$message.success(e.data.message),t.$refs.projectForm.resetFields(),t.dialogFormVisible=!1,t.getProjectListByPage(t.currentPage))}).catch(function(e){console.log(e)})})})},getProjectListByPage:function(e){var t=this;t.$axios._get("project",{page:e}).then(function(e){e.data.code?t.$message.error(e.data.message):(t.projectList=e.data.result.res_limit,t.totalProjects=e.data.result.total)}).catch(function(e){console.log(e)})},changeIcon:function(e){this.form.projectIcon=e},deleteRow:function(e){var t=this;t.$axios._delete("project/project",{projectId:e}).then(function(e){e.data.code?t.getProjectListByPage(t.currentPage):t.$message.error(e.data.message)}).catch(function(e){console.log(e)})},updateProject:function(e){this.form=e,this.dialogFormVisible=!0},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.getProjectListByPage(e)},filterProject:function(e,t){return t.project===e}}},k=(o("ox2I"),o("KHd+")),P=Object(k.a)(_,function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("div",{staticClass:"list-box"},[r("div",{staticClass:"search"},[r("el-button",{on:{click:o.addProject}},[o._v("新增项目")])],1),o._v(" "),r("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:o.projectList,"min-height":"250"}},[r("el-table-column",{attrs:{prop:"projectName",label:"项目名称"},scopedSlots:o._u([{key:"default",fn:function(e){return[r("router-link",{attrs:{to:""}},[o._v("\n          "+o._s(e.row.projectName)+"\n        ")])]}}])}),o._v(" "),r("el-table-column",{attrs:{prop:"projectIcon",label:"项目图标"},scopedSlots:o._u([{key:"default",fn:function(e){return[r("i",{class:e.row.projectIcon?"iconfont "+e.row.projectIcon:"",staticStyle:{display:"block","padding-left":"20px"}})]}}])}),o._v(" "),r("el-table-column",{attrs:{prop:"projectUrl",label:"预览地址"}}),o._v(" "),r("el-table-column",{attrs:{prop:"projectCode",label:"源码地址"}}),o._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:o._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),o.updateProject(t.row)}}},[o._v("\n          修改\n        ")]),o._v(" "),r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),o.deleteRow(t.row._id)}}},[o._v("\n          移除\n        ")])]}}])})],1),o._v(" "),r("div",{staticClass:"table-pagination"},[r("el-pagination",{attrs:{"current-page":o.currentPage,"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:o.totalProjects},on:{"size-change":o.handleSizeChange,"current-change":o.handleCurrentChange}})],1),o._v(" "),r("el-dialog",{attrs:{title:"新增项目",visible:o.dialogFormVisible},on:{"update:visible":function(e){o.dialogFormVisible=e}}},[r("el-form",{ref:"projectForm",attrs:{model:o.form,rules:o.rules,"label-width":"120px"},nativeOn:{keyup:function(e){return"button"in e||!o._k(e.keyCode,"enter",13,e.key,"Enter")?o.submitForm(e):null}}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("el-input",{ref:"projectName",attrs:{autocomplete:"off"},model:{value:o.form.projectName,callback:function(e){o.$set(o.form,"projectName",e)},expression:"form.projectName"}})],1),o._v(" "),r("el-form-item",{attrs:{label:"标签描述"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:o.form.projectDesc,callback:function(e){o.$set(o.form,"projectDesc",e)},expression:"form.projectDesc"}})],1),o._v(" "),r("el-form-item",{attrs:{label:"预览地址"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:o.form.projectUrl,callback:function(e){o.$set(o.form,"projectUrl",e)},expression:"form.projectUrl"}})],1),o._v(" "),r("el-form-item",{attrs:{label:"源码地址",prop:"projectCode"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:o.form.projectCode,callback:function(e){o.$set(o.form,"projectCode",e)},expression:"form.projectCode"}})],1),o._v(" "),r("el-form-item",{attrs:{label:"项目图标"}},[r("ul",[r("li",[r("el-button",{class:"icon-vue"===o.form.projectIcon?"focused-button":"",on:{click:function(e){o.changeIcon("icon-vue")}}},[r("i",{staticClass:"iconfont icon-vue"})])],1),o._v(" "),r("li",[r("el-button",{class:"icon-node"===o.form.projectIcon?"focused-button":"",on:{click:function(e){o.changeIcon("icon-node")}}},[r("i",{staticClass:"iconfont icon-node"})])],1),o._v(" "),r("li",[r("el-button",{class:"icon-react"===o.form.projectIcon?"focused-button":"",on:{click:function(e){o.changeIcon("icon-react")}}},[r("i",{staticClass:"iconfont icon-react"})])],1),o._v(" "),r("li",[r("el-button",{class:"icon-angular"===o.form.projectIcon?"focused-button":"",on:{click:function(e){o.changeIcon("icon-angular")}}},[r("i",{staticClass:"iconfont icon-angular"})])],1)])])],1),o._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){o.dialogFormVisible=!1}}},[o._v("取 消")]),o._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:o.submitForm}},[o._v("确 定")])],1)],1)],1)},[],!1,null,"f1660082",null);P.options.__file="ProjectList.vue",t.default=P.exports},ox2I:function(e,t,o){"use strict";var r=o("wF3k");o.n(r).a},wF3k:function(e,t,o){}}]);